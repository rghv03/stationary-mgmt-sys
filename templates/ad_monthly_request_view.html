{% extends 'base.html' %}
{% block title %}Monthly Request Details{% endblock %}
{% block body %}
<div class="container mt-5">
    <h2>Monthly Request Details</h2>
    <p><strong>Requested By:</strong> {{ user.first_name }} {{ user.middle_name }} {{ user.last_name }}</p>
    <p><strong>Department:</strong> {{ req.department.shortname }}</p>
    <p><strong>Requested on:</strong> {{ req.date_requested.strftime('%d-%m-%Y at %H:%M') }}</p>
    <p><strong>Status:</strong> {{ req.ad_status }}</p>
    <h4>Items Requested:</h4>
    <table class="table table-bordered">
        <thead class="table-dark">
            <tr>
                <th style="text-align: center;">Sr. No.</th>
                <th style="text-align: center;">Item</th>
                <th style="text-align: center;">Quantity</th>
                <th style="text-align: center;">Remarks</th>
            </tr>
        </thead>
        <tbody>
            {% for item in req.items %}
            <tr>
                <td style="text-align: center;">{{ loop.index }}</td>
                <td style="text-align: center;">{{ item.item }}</td>
                <td style="text-align: center;">{{ item.quantity }}</td>
                <td style="text-align: center;">{{ item.remarks }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if req.ad_status == 'Pending' %}
    <form method="POST" action="/ad/monthly-request/{{ req.id }}/action">
        <button name="action" value="approve" class="btn btn-success">Approve</button>
        <button name="action" value="reject" class="btn btn-danger">Reject</button>
    </form>
    {% endif %}
    <a href="/ad/monthly-requests" class="btn btn-secondary mt-3">Back</a>
</div>
{% endblock %}